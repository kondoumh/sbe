# Tauri vs Electron: プロセスモデル比較結果

## 実験: 4つのウィンドウを開いた場合

### Tauri の結果

```
プロセス数: 1個
PID: 29515
メモリ使用: 118 MB (RSS)
CPU: 1.0%
```

**重要な発見:**
- ✅ **シングルプロセス**: 複数のウィンドウを開いても1つのプロセスのみ
- ✅ **軽量**: メモリ使用量は約118MB
- ✅ **効率的**: すべてのWebViewが同じプロセス内で動作

### Electron (既存のsbeアプリ) の結果

複数のRendererプロセスが確認できました：
```
- sbe Helper (Renderer) プロセス × 複数
- 各プロセスが 200-400 MB のメモリを使用
```

## アーキテクチャの違い

### Tauri (実証済み)
```
┌─────────────────────────────────────┐
│  単一Rustプロセス (PID: 29515)        │
│  ├── メインウィンドウ (WKWebView)      │
│  ├── ウィンドウ2 (WKWebView)          │
│  ├── ウィンドウ3 (WKWebView)          │
│  └── ウィンドウ4 (WKWebView)          │
│  全て同じプロセス内                     │
└─────────────────────────────────────┘
メモリ: ~118 MB
```

### Electron
```
┌─────────────────────┐
│ メインプロセス (Node) │
└─────────────────────┘
         ↓
┌─────────────────────┐
│ Renderer 1          │ 200+ MB
└─────────────────────┘
┌─────────────────────┐
│ Renderer 2          │ 200+ MB
└─────────────────────┘
┌─────────────────────┐
│ Renderer 3          │ 200+ MB
└─────────────────────┘
合計メモリ: 600+ MB
```

## 質問への回答

**Q: WebviewWindowBuilder が作る Window は個別のプロセスで動くの？**

**A: いいえ、動きません。**

実験で確認した通り：
- すべてのウィンドウは**同じプロセス内**で動作
- macOSのWKWebViewを使用
- メモリ効率が非常に良い
- プロセス分離はない

## メリット・デメリット

### ✅ メリット
1. **メモリ効率**: 4ウィンドウで118MB vs Electronの600MB+
2. **起動速度**: プロセス起動のオーバーヘッドなし
3. **シンプル**: プロセス管理が不要

### ❌ デメリット
1. **セキュリティ**: プロセス分離がないため、1つのウィンドウの脆弱性が全体に影響
2. **安定性**: 1つのWebViewがクラッシュすると全アプリが停止
3. **リソース分離**: メモリやCPUが完全に分離されていない

## 推奨事項

- ✅ **Tauriが適している**: 信頼できるコンテンツ、メモリ効率重視
- ⚠️ **Electronが適している**: 複雑な外部コンテンツ、完全な分離が必要

現在のsbeアプリの場合：
- Scrapboxは信頼できるサービス
- メモリ効率が重要
- **Tauriの方が適している** ✅

